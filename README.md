# Правила
Для большего интереса я немного изменил правила и времена действия баффов.

![Strawberry](https://github.com/dezhurko/faraway-platformer/assets/7524653/15859bc0-220a-4381-aa3c-eb56c43d511c) : ускоряет персонажа на 10 секунд<br>
![Pineapple](https://github.com/dezhurko/faraway-platformer/assets/7524653/c3f1664e-75ce-4732-ba29-8e3a533bb3f9) : замедляет на 5 секунд<br>
![Bananas](https://github.com/dezhurko/faraway-platformer/assets/7524653/2feb8d0b-946f-4cb5-9c7d-8fd496931a2e) : позволяет летать 6 секунд<br>

Задача: собрать 10 ![Cherries](https://github.com/dezhurko/faraway-platformer/assets/7524653/3aad987d-95ff-4ffb-847b-702a26c77bc6)<br>

# Управление

**На клавиатуре**<br>
* _A_ : влево<br>
* _D_ : вправо<br>
* _W_ : вверх<br>
* _S_ : вниз<br>
* _Space_ : прыжок<br>

**На тачскрине**<br>
* джойстик слева : влево, вправо, вверх, вниз<br>
* тап српава : прыжок

# Общая архитектура проекта

Общая архитектура проекта базируется на модифицированном паттерне MVC. Ниже представлена общая структура проекта и связи между ее частями.

![GeneralArchitecture](https://github.com/dezhurko/faraway-platformer/assets/7524653/6dbe3220-bdf0-489d-81a1-7db9d8c89df3)

*Рис 1. Диаграмма основных сборок в проекте.*

* Сборка Actors - аналог сборки View, представляет собой максимально лишенные логики классы, предоставляющие интерфейс взаимодействия с классами движка Unity.
* Сборка Actors.Contracts - сборка, содержащая интерфейсы, отделяющие классы сборки Actors от классов из сборки Controllers.
* Сборка Entities - это модель приложения. Здесь содержится вся бизнес-логика.
* Сборка Controllers - содержит классы контроллеров, связывающие модель и представление (Actors).

Эта архитектура позволяет реализовать абстрактную бизнес-логику и логику контроллеров независимо от деталей реализации представления.
Также эта структура позволяет покрыть юнит-тестами классы модели и контроллеры.
В проекте представлен пример написания юнит-тестов для классов FlyingBuff и SpeedBuff (сборка Entities.Test).

Создание объектов и их связывание выполняется в классе MainEntry. Это единая точка входа в проект. Для продакшн-проектов среднего или крупного размера рекомендуется использовать DI-фреймворк, подобный Zenject или VContainer.

При разработке логики приложения наибольший интерес вызвала разработка классов для реализации логики бафов и дебафов.
Ниже представлена диаграмма классов, которая обеспечивает простое добавление новых бафов и диаграмма классов для реализации логики интерактивных обектов на сцене.

![InteractiveObjects](https://github.com/dezhurko/faraway-platformer/assets/7524653/2e22d365-5815-4a3c-8230-65d108931759)

*Рис 2. Диаграмма классов для реализации логики интерактивных обектов на сцене.*

![Buffs](https://github.com/dezhurko/faraway-platformer/assets/7524653/a49a0b50-fad2-414a-8fb5-0341a3707745)

*Рис 3. Диаграмма классов описывающий принцип работы системы бафов и дебафов.*

Любой интерактивный объект (Actors.InteractiveObject) при взаимодействии вызывает событие с параметром объекта-наследника класса InteractiveObjectData. На основе этого объекта фабрика создает объект-наследник типа InteractiveObject.
Внутри метода Interact этого объекта можно описать любую логику взаимодействия. Для интерактивных объектов, содержащих бафы и дебафы, создается объект класса BuffInteractiveObject. Который, в свою очередь, тоже содержит фабрику для создания определенного бафа.
Все бафы имеют метод, определяющий правила комбинирования бафов, чтобы корректно накладывать и снимать несколько одинаковых бафов.
